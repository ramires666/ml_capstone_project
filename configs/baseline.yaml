# =============================================================================
# XGBoost Baseline Model Configuration
# =============================================================================
# 
# This configuration file defines all parameters for the XGBoost baseline model.
# Modify these values to experiment with different settings.
#
# Usage:
#   python -m src.models.train --config configs/baseline.yaml
#
# =============================================================================

# -----------------------------------------------------------------------------
# Model Type
# -----------------------------------------------------------------------------
model:
  type: xgboost  # Options: 'xgboost' or 'cnn_lstm'

# -----------------------------------------------------------------------------
# Data Settings
# -----------------------------------------------------------------------------
# Defines the date ranges for training and testing
data:
  train_start: "2024-01-01"   # Start date for training data
  train_end: "2025-06-30"     # End date for training data
  test_start: "2025-07-01"    # Start date for test data
  test_end: "2025-12-31"      # End date for test data

# -----------------------------------------------------------------------------
# Target Label Settings (Oracle)
# -----------------------------------------------------------------------------
# Controls how the oracle labels are generated using Gaussian smoothing
labeling:
  # Sigma: Standard deviation for Gaussian kernel
  # Higher values = more smoothing = fewer direction changes
  # Typical range: 2-10 for 15-minute candles
  sigma: 3
  
  # Threshold: Minimum slope for UP/DOWN classification
  # Higher values = more SIDEWAYS labels
  # Typical range: 0.0002-0.0008 for 15-minute BTC data
  threshold: 0.0002
  
  # Number of classes (2 = UP/DOWN, 3 = UP/SIDEWAYS/DOWN)
  n_classes: 3

# -----------------------------------------------------------------------------
# Feature Settings
# -----------------------------------------------------------------------------
features:
  # Prediction horizon: how many bars ahead to predict
  # horizon=1 means predict next bar's direction
  # horizon=5 means predict direction 5 bars ahead
  horizon: 1
  
  # Feature groups to include
  # Options: momentum, overlap, trend, volatility, volume, statistics, candle
  groups:
    - momentum
    - overlap
    - trend
    - volatility
    - volume
    - statistics
  
  # Top K features to use (set to null to use all)
  # Using fewer features can reduce overfitting
  top_k_features: null

# -----------------------------------------------------------------------------
# XGBoost Model Parameters
# -----------------------------------------------------------------------------
xgboost:
  # Device: 'cuda' for GPU acceleration, 'cpu' for CPU only
  device: cuda
  
  # Random state for reproducibility
  random_state: 42
  
  # Default model parameters (will be overridden if tuning is enabled)
  n_estimators: 100       # Number of boosting rounds
  learning_rate: 0.1      # Step size shrinkage
  max_depth: 5            # Maximum tree depth
  subsample: 0.8          # Row subsampling ratio
  colsample_bytree: 0.8   # Column subsampling ratio

# -----------------------------------------------------------------------------
# Hyperparameter Search Space
# -----------------------------------------------------------------------------
# Used by RandomizedSearchCV when n_iter_search > 0
hyperparam_search:
  n_estimators: [50, 100, 200, 300]
  learning_rate: [0.01, 0.03, 0.05, 0.1, 0.2]
  max_depth: [2, 3, 5, 7]
  min_child_weight: [1, 3, 5]
  gamma: [0, 0.1, 0.3]
  subsample: [0.6, 0.8, 1.0]
  colsample_bytree: [0.6, 0.8, 1.0]
  reg_alpha: [0, 0.01, 0.1, 1]
  reg_lambda: [0, 0.01, 0.1, 1]

# -----------------------------------------------------------------------------
# Training Settings
# -----------------------------------------------------------------------------
training:
  # Number of hyperparameter combinations to try
  # Set to 0 to skip tuning and use default parameters
  n_iter_search: 25
  
  # Number of cross-validation splits (TimeSeriesSplit)
  cv_splits: 5
  
  # Scoring metric for hyperparameter selection
  # Options: 'accuracy', 'f1_weighted', 'f1_macro'
  scoring: f1_weighted

# -----------------------------------------------------------------------------
# Output Settings
# -----------------------------------------------------------------------------
output:
  # Directory to save trained models and artifacts
  model_dir: models_artifacts
  
  # Directory for metrics and plots
  reports_dir: reports
